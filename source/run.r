##########################################################################################################
# R Code
# Base experiment 
# R. G.  Mantovani, 2014
# Start the experiment 
##########################################################################################################

setup = function() {

	files = list.files("exp/", recursive=TRUE, full.name=TRUE);	
	for(i in files){
		source(i);
	}
}


##########################################################################################################
##########################################################################################################

# Running experiment 
run = function() {

	dirs = creating.folders();
	file = "Alternativa.arff";
	filename =  gsub("*\\.(\\w*)", "\\", file);

	cat("@File:",filename, "\n");
	cat("@Method:", METHOD, "\n");
	data = read.arff(paste( dirs$datasets.dir, file, sep=""))

	#Dataset with no Tbars
	if(!TBARS){
		cat(" @TBARS attribute: not used ... \n");
		data = data[,c(1,2,3,4,5,7)]; # comentar para usar o Tbars
	} else{
		cat(" @TBARS attribute: use ... \n");
	}

	exit = root(data, dirs);

	#output files
	files = output.files(dirs$out.dir)	

	dump("exit",files$rdata);
	write.table(x=exit, file=files$csv);

}

##########################################################################################################
##########################################################################################################

main = function(){

	setup();	# loading files
	run();		# running experiment

}

##########################################################################################################
##########################################################################################################

main();

##########################################################################################################
##########################################################################################################
